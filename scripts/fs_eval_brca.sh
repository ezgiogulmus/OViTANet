#!/bin/bash

data_name="tcga_brca"
output_file="./scripts/errors/output_fseval_"$data_name".txt"

> "$output_file"

run_command() {
  local cmd="$1"
  echo "Running: $cmd"
  eval "$cmd" || (echo "Command failed, capturing output..." && eval "$cmd >> $output_file 2>&1")
}

# OS
# All
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --omics rna --model_type mlp --mlp_type big"
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --omics dna --model_type mlp --mlp_type big"
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --omics cnv --model_type mlp --mlp_type big"
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --omics pro --model_type mlp --mlp_type big"
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --omics mut --model_type mlp --mlp_type big"

# Selected
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --omics rna --selected_features  --model_type mlp --mlp_type small"
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --omics dna --selected_features  --model_type mlp --mlp_type small"
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --omics cnv --selected_features  --model_type mlp --mlp_type small"
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --omics pro --selected_features  --model_type mlp --mlp_type small"
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --omics mut --selected_features  --model_type mlp --mlp_type small"

# Combinations of Selected
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,dna --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,cnv --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,mut --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics dna,cnv --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics dna,mut --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics dna,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics cnv,mut --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics cnv,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics mut,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,dna,cnv --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,dna,mut --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,dna,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,cnv,mut --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,cnv,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,mut,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics dna,cnv,mut --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics dna,cnv,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics dna,mut,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics cnv,mut,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,dna,cnv,mut --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,dna,cnv,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,dna,mut,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,cnv,mut,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_os --data_name "$data_name"_os --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics dna,cnv,mut,pro --mlp_type small --model_type mlp"

# DFS
# All
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --omics rna --model_type mlp --mlp_type big"
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --omics dna --model_type mlp --mlp_type big"
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --omics cnv --model_type mlp --mlp_type big"
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --omics pro --model_type mlp --mlp_type big"
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --omics mut --model_type mlp --mlp_type big"

# Selected
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --omics rna --selected_features  --model_type mlp --mlp_type small"
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --omics dna --selected_features  --model_type mlp --mlp_type small"
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --omics cnv --selected_features  --model_type mlp --mlp_type small"
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --omics pro --selected_features  --model_type mlp --mlp_type small"
run_command "CUDA_VISIBLE_DEVICES=1 python main.py --results_dir ./results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --omics mut --selected_features  --model_type mlp --mlp_type small"

# Combinations of Selected
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,dna --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,cnv --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,mut --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics dna,cnv --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics dna,mut --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics dna,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics cnv,mut --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics cnv,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics mut,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,dna,cnv --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,dna,mut --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,dna,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,cnv,mut --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,cnv,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,mut,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics dna,cnv,mut --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics dna,cnv,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics dna,mut,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics cnv,mut,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,dna,cnv,mut --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,dna,cnv,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,dna,mut,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics rna,cnv,mut,pro --mlp_type small --model_type mlp"
run_command "CUDA_VISIBLE_DEVICES=0 python main.py --results_dir results/fs_eval/"$data_name"_dfs --data_name "$data_name"_dfs --weighted_sample --max_epochs 20 --early_stopping -1 --selected_features --separate_branches --fusion bilinear --omics dna,cnv,mut,pro --mlp_type small --model_type mlp"
python ./scripts/check_errors.py "$output_file"